cháº¡y file vá»›i lá»‡nh
python request_google_maps.py
Káº¿t quáº£ lÃ :
lÆ°u vÃ o file: google_maps_phone.csv vá»›i cá»™t tÃªn Ä‘á»‹a Ä‘iá»ƒm, sá»‘ Ä‘iá»‡n thoáº¡i, Ä‘á»‹a chá»‰

Tor Network lÃ  má»™t cÃ¡ch hiá»‡u quáº£ Ä‘á»ƒ Ä‘á»•i IP miá»…n phÃ­ liÃªn tá»¥c khi scrape dá»¯ liá»‡u. DÆ°á»›i Ä‘Ã¢y lÃ  cÃ¡ch cÃ i Ä‘áº·t vÃ  sá»­ dá»¥ng Tor trong Python Ä‘á»ƒ gá»­i request áº©n danh.

1. CÃ i Äáº·t Tor

ğŸ”¹ Linux / Mac

Má»Ÿ terminal vÃ  cháº¡y lá»‡nh:

sudo apt install tor  # Ubuntu/Debian
brew install tor  # MacOS

ğŸ”¹ Windows
	1.	Táº£i Tor Expert Bundle tá»« trang chÃ­nh thá»©c:
ğŸ”— https://www.torproject.org/download/
	2.	Giáº£i nÃ©n vÃ  cháº¡y tor.exe trong thÆ° má»¥c Tor

ğŸ“Œ Sau khi cÃ i Ä‘áº·t, kiá»ƒm tra Tor Ä‘ang cháº¡y báº±ng lá»‡nh:

tor

Náº¿u Tor hoáº¡t Ä‘á»™ng Ä‘Ãºng, báº¡n sáº½ tháº¥y dÃ²ng:
âœ… â€œBootstrapped 100%: Doneâ€

2. DÃ¹ng Tor Vá»›i Python (Requests + Proxy SOCKS5)

Sau khi Tor cháº¡y, báº¡n cÃ³ thá»ƒ gá»­i request thÃ´ng qua SOCKS5 proxy táº¡i 127.0.0.1:9050.

ğŸ“Œ CÃ i Ä‘áº·t thÆ° viá»‡n Python cáº§n thiáº¿t:

pip install requests[socks]

ğŸ“Œ Gá»­i request qua Tor:

import requests

proxies = {
    "http": "socks5h://127.0.0.1:9050",
    "https": "socks5h://127.0.0.1:9050"
}

url = "http://check.torproject.org"  # Kiá»ƒm tra IP
response = requests.get(url, proxies=proxies)

print(response.text)  # Náº¿u thÃ nh cÃ´ng, sáº½ tháº¥y "Congratulations. This browser is configured to use Tor"

ğŸ“Œ LÆ°u Ã½:
	â€¢	Tor chá»‰ há»— trá»£ SOCKS5 proxy, khÃ´ng pháº£i HTTP/HTTPS proxy.
	â€¢	Báº¡n cáº§n cháº¡y Tor trÆ°á»›c khi cháº¡y script Python.

3. Tá»± Äá»™ng Äá»•i IP Sau Má»—i Request

Tor cÃ³ thá»ƒ thay Ä‘á»•i IP báº±ng cÃ¡ch gá»­i lá»‡nh NEWNYM qua cá»•ng 9051.

ğŸ“Œ Báº­t Ä‘iá»u khiá»ƒn Tor:
	1.	Má»Ÿ file cáº¥u hÃ¬nh Tor (torrc)
	â€¢	TrÃªn Linux/Mac: /etc/tor/torrc
	â€¢	TrÃªn Windows: C:\Users\USERNAME\AppData\Roaming\tor\torrc
	2.	ThÃªm dÃ²ng sau Ä‘á»ƒ kÃ­ch hoáº¡t cá»•ng Ä‘iá»u khiá»ƒn:

ControlPort 9051
HashedControlPassword ""
CookieAuthentication 0


	3.	Khá»Ÿi Ä‘á»™ng láº¡i Tor

ğŸ“Œ Python Script Ä‘á»ƒ Ä‘á»•i IP tá»± Ä‘á»™ng:

import requests
import stem.process
from stem.control import Controller

proxies = {
    "http": "socks5h://127.0.0.1:9050",
    "https": "socks5h://127.0.0.1:9050"
}

def new_tor_identity():
    with Controller.from_port(port=9051) as controller:
        controller.authenticate()  # KhÃ´ng cáº§n máº­t kháº©u náº¿u Ä‘Ã£ chá»‰nh file torrc
        controller.signal(stem.Signal.NEWNYM)  # Gá»­i lá»‡nh Ä‘á»•i IP
        print("ÄÃ£ Ä‘á»•i IP thÃ nh cÃ´ng!")

# Gá»­i request kiá»ƒm tra IP trÆ°á»›c vÃ  sau khi Ä‘á»•i
url = "http://check.torproject.org"

print("IP cÅ©:")
print(requests.get(url, proxies=proxies).text)

new_tor_identity()  # Äá»•i IP

print("IP má»›i:")
print(requests.get(url, proxies=proxies).text)

ğŸ“Œ Giáº£i thÃ­ch:
	â€¢	HÃ m new_tor_identity() gá»­i lá»‡nh NEWNYM Ä‘áº¿n Tor Ä‘á»ƒ Ä‘á»•i IP.
	â€¢	Script sáº½ hiá»ƒn thá»‹ IP trÆ°á»›c vÃ  sau khi Ä‘á»•i.

4. Giá»›i Háº¡n & LÆ°u Ã Khi DÃ¹ng Tor

ğŸ”¸ Tor khÃ´ng nhanh vÃ¬ nÃ³ Ä‘á»‹nh tuyáº¿n qua nhiá»u mÃ¡y chá»§ áº©n danh.
ğŸ”¸ Google & nhiá»u trang web cÃ³ thá»ƒ cháº·n Tor, báº¡n cáº§n dÃ¹ng User-Agent giáº£ máº¡o.
ğŸ”¸ Náº¿u Tor bá»‹ cháº·n, báº¡n cÃ³ thá»ƒ thÃªm Bridges trong file torrc Ä‘á»ƒ vÆ°á»£t qua.

5. Káº¿t Há»£p Tor & Fake User-Agent Äá»ƒ KhÃ´ng Bá»‹ Cháº·n

ğŸ“Œ ThÃªm User-Agent giáº£ máº¡o Ä‘á»ƒ trÃ¡nh bá»‹ phÃ¡t hiá»‡n:

from fake_useragent import UserAgent

ua = UserAgent()
headers = {"User-Agent": ua.random}

response = requests.get("http://check.torproject.org", proxies=proxies, headers=headers)
print(response.text)

ğŸ“Œ CÃ i Ä‘áº·t thÆ° viá»‡n Fake User-Agent:

pip install fake-useragent

TÃ³m Táº¯t

âœ… Tor giÃºp Ä‘á»•i IP miá»…n phÃ­ liÃªn tá»¥c
âœ… CÃ³ thá»ƒ tá»± Ä‘á»™ng Ä‘á»•i IP sau má»—i request
âœ… Cáº§n dÃ¹ng SOCKS5 proxy (127.0.0.1:9050) Ä‘á»ƒ káº¿t ná»‘i
âœ… CÃ³ thá»ƒ káº¿t há»£p vá»›i Fake User-Agent Ä‘á»ƒ trÃ¡nh bá»‹ cháº·n